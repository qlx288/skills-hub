# 企业微信接入配置指南

## 步骤1：注册/登录企业微信

访问 https://work.weixin.qq.com/

## 步骤2：创建应用

1. 登录后进入「应用管理」
2. 点击「自建应用」
3. 点击「创建应用」
4. 填写：
   - 应用名称：AI小助手
   - 应用描述：智能群聊助手
   - 应用logo：可选
5. 创建完成

## 步骤3：获取配置

在应用详情页可以看到：

```
AgentID: 1000001  ← 应用ID
```

在「我的企业」→「企业信息」可以看到：

```
CorpID: ww1234567890abcdf  ← 企业ID
```

在应用详情页点击「查看Secret」：

```
Secret: abcd1234567890...  ← 应用密钥
```

## 步骤4：配置可信IP

1. 进入「API安全」
2. 添加可信IP：你的服务器IP（或本地开发用 0.0.0.0）

## 步骤5：配置应用权限

在应用详情页：
1. 点击「API权限」
2. 开启「企业微信开发者权限」
3. 开启「通讯录只读权限」（可选）

## 步骤6：邀请用户

1. 在应用页面点击「发布」
2. 选择可见范围（部门/成员）

---

## 运行机器人

```bash
cd ~/.claude/skills/teamily-ai-core

# 编辑配置
# 打开 wecom_runner.py 填入你的配置

# 运行
python wecom_runner.py --test  # 测试模式（模拟消息）
python wecom_runner.py         # 正式模式（需要公网域名）
```

## 正式上线（需要公网域名）

1. 购买域名和服务器
2. 配置 SSL 证书（https）
3. 在企业微信后台配置回调URL：
   - URL: https://your-domain.com/wecom
   - Token: 自定义
   - EncodingAESKey: 可选
4. 运行 `python wecom_runner.py`

---

## 常见问题

**Q: 没有企业怎么办？**
A: 用个人身份证注册企业微信（免费），不需要企业认证

**Q: 需要服务器吗？**
A: 测试可以用本地，正式上线需要公网域名

**Q: 能用微信登录吗？**
A: 不能，需要企业微信账号
